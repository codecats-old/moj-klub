/*!
* screenfull
* v1.0.4 - 2013-05-26
* https://github.com/sindresorhus/screenfull.js
* (c) Sindre Sorhus; MIT License
*/
(function(g,f){var j="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT" in Element,i=function(){for(var b,o,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"]],m=0,l=n.length,k={};l>m;m++){if(b=n[m],b&&b[1] in f){for(m=0,o=b.length;o>m;m++){k[n[0][m]]=b[m]}return k}}return !1}(),h={request:function(b){var c=i.requestFullscreen;b=b||f.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?b[c]():b[c](j&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){f[i.exitFullscreen]()},toggle:function(b){this.isFullscreen?this.exit():this.request(b)},onchange:function(){},onerror:function(){},raw:i};return i?(Object.defineProperties(h,{isFullscreen:{get:function(){return !!f[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return f[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return !!f[i.fullscreenEnabled]}}}),f.addEventListener(i.fullscreenchange,function(b){h.onchange.call(h,b)}),f.addEventListener(i.fullscreenerror,function(b){h.onerror.call(h,b)}),g.screenfull=h,void 0):g.screenfull=!1})(window,document);(function(e,c,a,g){var d="sGallery",f={fullScreenEnabled:false};function b(i,h){this.element=i;this.galleryContainer=e(this.element);this.bigItemsList=this.galleryContainer.children("ul:eq(1)");this.bigItem=this.bigItemsList.children("li");this.options=e.extend({},f,h);this._defaults=f;this._name=d;this.current="";this.slideshow=false;this.initialHeight="auto";this.isFullScreen=false;this.$controls=e(".controls");this.$control=e(".control");this.$grid=e(".grid");this.$fsButton=e(".fs-toggle");this.$document=e(a);this.$window=e(c);this.init()}b.prototype={init:function(){var k=this,i=this.galleryContainer.find("ul:eq(0)"),l=i.children("li"),j=this.bigItem.length,h=this.options;this.setDelays(i);this.bindListHandler(i);this.handleQuit();this.controlSlideShow(j);if(h.fullScreenEnabled){this.controlFullScreen()}this.changeOnResize()},changeOnResize:function(){var h=this;this.$window.load(function(){h.$window.resize(function(){h.initialHeight=h.galleryContainer.outerHeight();h.minHeight=h.bigItem.height()+parseInt(h.bigItem.css("top"))+h.$controls.height()*2;console.log("window resize");h.adaptHeight()});h.$window.trigger("resize")})},setDelays:function(h){h.children("li").each(function(i){e(this).css("animation-delay",0.075*i+"s")})},bindListHandler:function(h){var i=this;h.on("click","li img",function(k){k.preventDefault();var j=e(this).parent();i.current=j.index();i.fadeAllOut();i.showControls();i.slideshow=true;startImg=i.bigItemsList.children("li:eq("+i.current+")");j.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(l){startImg.addClass("fadeInScaleUp").removeClass("fadeOut");i.adaptHeight()})})},adaptHeight:function(){var i=this,h=this.bigItem.outerHeight();if(i.slideshow&&i.initialHeight<i.minHeight){e(i.element).animate({height:i.minHeight+"px"},0);console.log("adapting height first if")}else{if(i.slideshow&&i.initialHeight>i.minHeight){e(this.element).animate({height:i.minHeight+"px"},0);console.log("adapting height second if")}}},fadeAllOut:function(){this.galleryContainer.children("ul:eq(0)").children("li").removeClass("scaleUpFadeIn").removeClass("showLastSecond").addClass("scaleDownFadeOut")},fadeAllIn:function(){var h=this;var i=this.galleryContainer.children("ul:eq(0)").children("li:eq("+h.current+")");this.galleryContainer.children("ul:eq(0)").children("li").not(i).removeClass("scaleDownFadeOut").addClass("scaleUpFadeIn");i.removeClass("scaleDownFadeOut").addClass("showLastSecond")},showControls:function(){this.$controls.addClass("showControls").removeClass("hideControls")},hideControls:function(){this.$controls.addClass("hideControls").removeClass("showControls")},controlSlideShow:function(j){var i=this,h;this.$document.on("keydown",function(k){var k=k||c.event;h=k.keyCode;if(h==37&&i.slideshow){i.current--;if(i.current<0){i.current=j-1}i.moveToNextImage()}else{if(h==39&&i.slideshow){i.current++;if(i.current==j){i.current=0}i.moveToNextImage()}}});this.$control.on("click",function(){var k=e(this).data("direction");(k=="next")?i.current++:i.current--;if(i.current<0){i.current=j-1}else{if(i.current==j){i.current=0}}i.moveToNextImage()})},moveToNextImage:function(){var h=this;var i=this.bigItemsList.children("li:eq("+h.current+")").addClass("fadeInScaleUp").siblings("li").filter(".fadeInScaleUp").removeClass("fadeInScaleUp").addClass("fadeOut").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(j){e(this).removeClass("fadeOut")})},handleQuit:function(){var h=this;this.$document.on("keydown",function(i){var i=i||c.event;key=i.keyCode;if(key==16&&h.slideshow){h.quitSlideShow()}});this.$grid.on("click",function(){h.quitSlideShow()})},controlFullScreen:function(){var i=this,h=this.element;this.$fsButton.css("display","inline-block").on("click",function(){if(screenfull.enabled){screenfull.toggle(h);if(!i.isFullScreen){e(this).removeClass("icon-fullscreen").addClass("icon-fullscreen-exit");i.isFullScreenfull=true}else{e(this).removeClass("icon-fullscreen-exit").addClass("icon-fullscreen");i.isFullScreen=false}}else{return false}})},quitSlideShow:function(p){this.hideControls();this.fadeAllIn();this.slideshow=false;var o=this;if(!this.isFullScreen){this.galleryContainer.animate({height:o.initialHeight},0,function(){e(this).css("height","auto")})}var k=this.galleryContainer.children("ul:eq(1)").children("li:eq("+o.current+")"),h=this.galleryContainer.children("ul:eq(0)").children("li:eq("+o.current+")"),r=h.height(),i=h.width(),j=h.position().left,q=h.position().top,m=parseFloat(h.css("animation-delay")),l=parseFloat(h.css("animation-duration")),n=m+l;k.children("img").andSelf().animate({height:r,width:i,left:j+"px",top:q+"px"},n*1000,function(){e(this).removeClass("fadeInScaleUp").removeAttr("style")})}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);
